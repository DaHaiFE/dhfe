<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>基于vue-treeselect 地域组件封装 · 大海前端团队 · 一群有趣有爱的人儿一起做有意义的事儿</title>
    <meta name="description" content="通用地区json引入方式，省市区展示方式修改，选择的地区标签部分区域点击禁止触发删除事件">
    <link rel="shortcut icon" href="/favicon.ico">
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#3F51B5">
  <meta http-equiv="pragma" content="no-cache">
  <meta http-equiv="content-type" content="no-cache, must-revalidate">
  <meta http-equiv="expires" content="Wed, 26 Feb 1997 08:21:57 GMT">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="apple-touch-icon" href="/icons/192.png">
  <meta name="msapplication-TileImage" content="/icons/192.png">
  <meta name="msapplication-TileColor" content="#3F51B5">
    
    <link rel="preload" href="/assets/css/styles.6283f8bb.css" as="style"><link rel="preload" href="/assets/js/app.6283f8bb.js" as="script"><link rel="preload" href="/assets/css/styles.6283f8bb.css" as="style"><link rel="preload" href="/assets/js/2.d64f867c.js" as="script"><link rel="prefetch" href="/assets/js/1.13567e9e.js"><link rel="prefetch" href="/assets/js/10.cda7f7ed.js"><link rel="prefetch" href="/assets/js/11.3da095dc.js"><link rel="prefetch" href="/assets/js/12.67543655.js"><link rel="prefetch" href="/assets/js/13.7dd55392.js"><link rel="prefetch" href="/assets/js/14.91028a3f.js"><link rel="prefetch" href="/assets/js/15.d4d57a6f.js"><link rel="prefetch" href="/assets/js/16.99bfb29a.js"><link rel="prefetch" href="/assets/js/17.0211ccb1.js"><link rel="prefetch" href="/assets/js/18.35ea9bfd.js"><link rel="prefetch" href="/assets/js/19.23a5a9da.js"><link rel="prefetch" href="/assets/js/20.83cde17b.js"><link rel="prefetch" href="/assets/js/21.b12d27ef.js"><link rel="prefetch" href="/assets/js/22.5b7b910b.js"><link rel="prefetch" href="/assets/js/23.b45cfb36.js"><link rel="prefetch" href="/assets/js/24.c0e7275a.js"><link rel="prefetch" href="/assets/js/25.254fbb04.js"><link rel="prefetch" href="/assets/js/26.5f8b6a5c.js"><link rel="prefetch" href="/assets/js/27.1c9b436f.js"><link rel="prefetch" href="/assets/js/3.9b4ad25c.js"><link rel="prefetch" href="/assets/js/4.2cbac349.js"><link rel="prefetch" href="/assets/js/5.2a8a5863.js"><link rel="prefetch" href="/assets/js/6.fe9fbac2.js"><link rel="prefetch" href="/assets/js/7.c2852f38.js"><link rel="prefetch" href="/assets/js/8.73ddbcc4.js"><link rel="prefetch" href="/assets/js/9.d4f0020e.js">
    <link rel="stylesheet" href="/assets/css/styles.6283f8bb.css"><link rel="stylesheet" href="/assets/css/styles.6283f8bb.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div data-app="true" id="app" class="application theme--light"><div class="application--wrap"><div role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" class="v-progress-linear blog-progress" style="height:3px;display:none;"><div class="v-progress-linear__background accent" style="height:3px;opacity:0.4;width:100%;"></div><div class="v-progress-linear__bar"><!----><div class="v-progress-linear__bar__determinate accent" style="width:0%;"></div></div></div><aside class="v-navigation-drawer v-navigation-drawer--close v-navigation-drawer--fixed v-navigation-drawer--is-mobile theme--light" style="height:100%;margin-top:0px;max-height:calc(100% - 0px);transform:translateX(-240px);width:240px;"><div><div class="aside-brand-wrap" style="display:;"><div class="aside-brand"><a href="/" class="aside-avatar elevation-2 router-link-active"><img src="/face.jpg" alt="avatar"></a><hgroup class="mt-3 variant-hide"><div class="subheading white--text">大海前端团队-DHFE</div><a href="javacript:void(0)" title="有爱有趣" class="aside-mail primary--text text--lighten-5">有爱有趣</a></hgroup></div></div><hr class="v-divider theme--dark"><div class="v-list nav-list theme--light"><div class="secondary--text"><a href="/blog" class="v-list__tile v-list__tile--link theme--light"><div class="v-list__tile__avatar"><div class="v-avatar" style="height:40px;width:40px;"><i class="fa fa-tag"></i></div></div><div class="v-list__tile__content">Blog</div></a></div><div class="secondary--text"><a href="https://github.com/DahaiFE/dhfe" target="_blank" class="v-list__tile v-list__tile--link theme--light"><div class="v-list__tile__avatar"><div class="v-avatar" style="height:40px;width:40px;"><i class="fab fa-github"></i></div></div><div class="v-list__tile__content">Github</div></a></div><div class="secondary--text"><a href="/about" class="v-list__tile v-list__tile--link theme--light"><div class="v-list__tile__avatar"><div class="v-avatar" style="height:40px;width:40px;"><i class="fa fa-user-secret"></i></div></div><div class="v-list__tile__content">About</div></a></div><div class="secondary--text"><a href="/join" class="v-list__tile v-list__tile--link theme--light"><div class="v-list__tile__avatar"><div class="v-avatar" style="height:40px;width:40px;"><i class="fa fa-users"></i></div></div><div class="v-list__tile__content">Join</div></a></div></div></div><div class="v-navigation-drawer__border"></div></aside><main class="v-content" style="padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;"><div class="v-content__wrap"><div class="container blog-container grid-list-xl align-center"><div class="layout row wrap"><div class="flex mb-3 xs12"><article class="mb-lay v-card theme--light elevation-16 post-card" style="height:undefined;"><div class="v-card__title"><div class="flex xs12"><h2 class="display-1 mb-3">基于vue-treeselect 地域组件封装</h2><div class="post-meta"><time datetime="2019-03-22T00:00:00.000Z" class="secondary--text post-time">2019年03月22日</time></div></div></div><div class="v-card__text pt-0 pb-0"><div class="flex xs12"><div class="content custom"><p>通用地区json引入方式，省市区展示方式修改，
选择的地区标签文案区域点击禁止触发删除事件
</p><h5 id="做kms需求时候，切片需要跟地区关联，地区选择需求和解决方式如下："><a href="#做kms需求时候，切片需要跟地区关联，地区选择需求和解决方式如下：" aria-hidden="true" class="header-anchor">#</a> 做kms需求时候，切片需要跟地区关联，地区选择需求和解决方式如下：</h5><h5 id="_1、地区通用文件引入方式"><a href="#_1、地区通用文件引入方式" aria-hidden="true" class="header-anchor">#</a> 1、地区通用文件引入方式</h5><p>因为省市区数据是固定的，后端同学便提出不再查库获取数据，而是将一个json文件放到了cdn上，让前端自行请求静态文件。这个时候遇到跨域的一个坑，后端只针对线上域名配置了代理，测试环境域名不固定，没法在开发和测试的时候用代理解决跨域问题。</p><h5 id="解决方案："><a href="#解决方案：" aria-hidden="true" class="header-anchor">#</a> 解决方案：</h5><p>a、将json文件文件改成js文件，var baseCitys  = {} 改用js引入方式，然后在项目里写了一个plugin。</p><pre class="language-javascript"><code>在plugins文件夹里新建了一个city<span class="token punctuation">.</span>js文件。
<span class="token comment">// https://cdn.dahai.com/static/global/citys.js 为数据地址</span>
<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> mresolver <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/utils/utils'</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> plugin <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">install</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> mresolver <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">mresolver</span><span class="token punctuation">(</span><span class="token string">'https://cdn.dahai.com/static/global/citys.js'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>plugin<span class="token punctuation">)</span>
</code></pre><p>b、在nuxt.dev.config/nuxt.qa.config/nuxt.prod.config里分别配置上plugins</p><pre class="language-javascript"><code>plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      src<span class="token punctuation">:</span> <span class="token string">'~/plugins/citys'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
</code></pre><p>c、紧接着用window.baseCitys就可以拿到地区json数据</p><pre class="language-javascript"><code><span class="token keyword">let</span> datas <span class="token operator">=</span> window<span class="token punctuation">.</span>baseCitys
</code></pre><h5 id="_2、当选择区的时候，要求显示格式为省-市-区-如图"><a href="#_2、当选择区的时候，要求显示格式为省-市-区-如图" aria-hidden="true" class="header-anchor">#</a> 2、当选择区的时候，要求显示格式为省/市/区 如图</h5><p><img src="/assets/img/2019032201.89bd41e3.png" alt="avatar"></p><h5 id="解决方案：-2"><a href="#解决方案：-2" aria-hidden="true" class="header-anchor">#</a> 解决方案：</h5><p>可以用slot方式自定义value 值格式（slot=&quot;value-label&quot;）给每条数据加个类似描述的字符串。拼接'省市区'</p><pre class="language-javascript"><code><span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;vuetree-select-style&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>treeselect 
        v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;checkedRegionalArr&quot;</span>
        <span class="token punctuation">:</span>normalizer<span class="token operator">=</span><span class="token string">&quot;normalizer&quot;</span> <span class="token comment">//标准化源数据 </span>
        <span class="token punctuation">:</span>multiple<span class="token operator">=</span><span class="token string">&quot;true&quot;</span> <span class="token comment">// 支持多选</span>
        <span class="token punctuation">:</span>options<span class="token operator">=</span><span class="token string">&quot;regionalTreeDatas&quot;</span> 
        <span class="token punctuation">:</span>max<span class="token operator">-</span>height<span class="token operator">=</span><span class="token string">&quot;300&quot;</span>
        <span class="token punctuation">:</span>open<span class="token operator">-</span>direction<span class="token operator">=</span><span class="token string">&quot;openDirection&quot;</span>
        placeholder<span class="token operator">=</span><span class="token string">&quot;请选择地域&quot;</span>
        no<span class="token operator">-</span>results<span class="token operator">-</span>text<span class="token operator">=</span><span class="token string">&quot;无结果&quot;</span>
        value<span class="token operator">-</span>format<span class="token operator">=</span><span class="token string">&quot;object&quot;</span>
        <span class="token punctuation">:</span>clearable<span class="token operator">=</span><span class="token string">&quot;true&quot;</span>
        <span class="token punctuation">:</span><span class="token keyword">default</span><span class="token operator">-</span>expand<span class="token operator">-</span>level<span class="token operator">=</span><span class="token string">&quot;defaultExpandLevel&quot;</span>
        @input<span class="token operator">=</span><span class="token string">&quot;selectTreeHandle&quot;</span>
        <span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>template scope<span class="token operator">=</span><span class="token string">&quot;scope&quot;</span> slot<span class="token operator">-</span>scope<span class="token operator">=</span><span class="token string">&quot;{node}&quot;</span> slot<span class="token operator">=</span><span class="token string">&quot;value-label&quot;</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>div v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;showDesc&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>showDesc <span class="token operator">?</span> scope<span class="token punctuation">.</span>node<span class="token punctuation">.</span>raw<span class="token punctuation">.</span>desc <span class="token punctuation">:</span> scope<span class="token punctuation">.</span>node<span class="token punctuation">.</span>raw<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>treeselect<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

<span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token comment">// 多选时选中的地区</span>
        checkedRegionalArr<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token comment">// 获取地区数据</span>
        regionalTreeDatas<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token function">normalizer</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>
                id<span class="token punctuation">:</span> node<span class="token punctuation">.</span>code<span class="token punctuation">,</span>
                label<span class="token punctuation">:</span> node<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
                desc<span class="token punctuation">:</span> node<span class="token punctuation">.</span>desc<span class="token punctuation">,</span>
                children<span class="token punctuation">:</span> node<span class="token punctuation">.</span>children
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><pre class="language-javascript"><code><span class="token comment">// 拿到数据之后先给每一层添加desc &quot;省/市/区&quot; 给select默认选中的自定义格式</span>
      <span class="token function">addDescInfo</span><span class="token punctuation">(</span>provinces<span class="token punctuation">,</span> name<span class="token punctuation">,</span> code<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        provinces<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>province <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          province<span class="token punctuation">.</span>codes <span class="token operator">=</span> code <span class="token operator">?</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>code<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>province<span class="token punctuation">.</span>code<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span> <span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>province<span class="token punctuation">.</span>code<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span>
          province<span class="token punctuation">.</span>desc <span class="token operator">=</span> name <span class="token operator">?</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>province<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span> <span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>province<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>province<span class="token punctuation">.</span>children <span class="token operator">&amp;&amp;</span> province<span class="token punctuation">.</span>children<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">addDescInfo</span><span class="token punctuation">(</span>province<span class="token punctuation">.</span>children<span class="token punctuation">,</span> province<span class="token punctuation">.</span>desc<span class="token punctuation">,</span> province<span class="token punctuation">.</span>codes<span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> provinces
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">// 地区数据</span>
      <span class="token function">getRegionalData</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 添加全国通用在最外层</span>
        <span class="token keyword">let</span> parentObj <span class="token operator">=</span> <span class="token punctuation">{</span>
          code<span class="token punctuation">:</span> <span class="token string">'0'</span><span class="token punctuation">,</span>
          name<span class="token punctuation">:</span> <span class="token string">'全国通用'</span><span class="token punctuation">,</span>
          desc<span class="token punctuation">:</span> <span class="token string">'全国通用'</span><span class="token punctuation">,</span>
          codes<span class="token punctuation">:</span> <span class="token string">'0'</span>
        <span class="token punctuation">}</span>
        parentObj<span class="token punctuation">.</span>children <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">addDescInfo</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>baseCitys<span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>regionalTreeDatas <span class="token operator">=</span> <span class="token punctuation">[</span>parentObj<span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
</code></pre><h5 id="_3、已选择的地区标签文案区域点击禁止触发删除事件"><a href="#_3、已选择的地区标签文案区域点击禁止触发删除事件" aria-hidden="true" class="header-anchor">#</a> 3、已选择的地区标签文案区域点击禁止触发删除事件</h5><p>select选择值显示为标签和‘x’号两部分，vue-treeselect源码中实现的交互是点击‘x’和标签文案都会移除掉选择项。</p><h5 id="解决方案"><a href="#解决方案" aria-hidden="true" class="header-anchor">#</a> 解决方案</h5><p>查看源码，确定了绑定事件是mousedown。在点击文案时，需要移除关闭事件。在选择地区时调用该方法就可以。</p><pre class="language-javascript"><code><span class="token comment">// 关闭选项时，去掉标签文案的关闭事件 (需求要求)</span>
  <span class="token function">stopLabelPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> sel <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'.vue-treeselect__multi-value-label'</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
    sel<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>el <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      el<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'mousedown'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
      el<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mousedown'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre><h5 id="_4、编辑的时候，回显之前选择的默认值，后端返回的格式如下："><a href="#_4、编辑的时候，回显之前选择的默认值，后端返回的格式如下：" aria-hidden="true" class="header-anchor">#</a> 4、编辑的时候，回显之前选择的默认值，后端返回的格式如下：</h5><pre class="language-javascript"><code><span class="token keyword">let</span> initRegionalArr <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token punctuation">{</span>code<span class="token punctuation">:</span> <span class="token string">'4'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'福建省'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>code<span class="token punctuation">:</span> <span class="token string">'53'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'福州市'</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token punctuation">{</span>code<span class="token punctuation">:</span> <span class="token string">'1'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'安徽省'</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span>

还是要将checkedRegionalArr 选中的数组 处理成带有desc属性的<span class="token string">'省/市/区'</span>格式
<span class="token keyword">this</span><span class="token punctuation">.</span>checkedRegionalArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>initRegionalArr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>regionalSpan <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  obj<span class="token punctuation">.</span>code <span class="token operator">=</span> regionalSpan<span class="token punctuation">[</span>regionalSpan<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>code
  obj<span class="token punctuation">.</span>name <span class="token operator">=</span> regionalSpan<span class="token punctuation">[</span>regionalSpan<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name
  <span class="token keyword">const</span> nameArr <span class="token operator">=</span> regionalSpan<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>item <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
  <span class="token keyword">const</span> codesArr <span class="token operator">=</span> regionalSpan<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>item <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>code<span class="token punctuation">)</span>
  obj<span class="token punctuation">.</span>desc <span class="token operator">=</span> nameArr<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
  obj<span class="token punctuation">.</span>codes <span class="token operator">=</span> codesArr<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>checkedRegionalArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></div></div><div class="v-card__actions"><div class="flex xs12"><a href="/blog/JavaScript"><span tabindex="0" class="v-chip capitalize chip-tag v-chip--label v-chip--small theme--light"><span class="v-chip__content">JavaScript
            </span></span></a></div></div></article></div><div class="flex text-xs-left xs6"><!----></div><div class="flex text-xs-right xs6"><a href="/posts/vue-upload.html" class="post-nav v-btn v-btn--flat v-btn--router theme--light"><div class="v-btn__content"><div class="grey--text">Next
                    <i class="fa ml-1 fa-chevron-right"></i></div><div class="title mt-1 primary--text hidden-xs-only title-font">element upload总结</div></div></a></div></div></div></div></main><button type="button" class="v-btn v-btn--bottom v-btn--floating v-btn--fixed v-btn--right theme--light accent" style="display:none;background:#3a8ee6 !important;"><div class="v-btn__content"><i class="fa fa-lg fa-chevron-up"></i></div></button></div></div></div>
    <script src="/assets/js/app.6283f8bb.js" defer></script><script src="/assets/js/2.d64f867c.js" defer></script>
  </body>
</html>
